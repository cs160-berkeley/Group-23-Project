/* *     Copyright (C) 2010-2016 Marvell International Ltd. *     Copyright (C) 2002-2010 Kinoma, Inc. * *     Licensed under the Apache License, Version 2.0 (the "License"); *     you may not use this file except in compliance with the License. *     You may obtain a copy of the License at * *      http://www.apache.org/licenses/LICENSE-2.0 * *     Unless required by applicable law or agreed to in writing, software *     distributed under the License is distributed on an "AS IS" BASIS, *     WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. *     See the License for the specific language governing permissions and *     limitations under the License. */ var Pins = require("pins"); class AppBehavior extends Behavior { 	onLaunch(application) { 		Pins.configure({ 			heartRate: { 				require: "Analog", 				pins: { 					power: {pin: 59, voltage: 5, type: "Power"}, 					ground: {pin: 61, type: "Ground"}, 					analog: {pin: 60, direction: "input"}, 				} 			}, 		},  success => { 			if (success) { 				var oldHr = 0; 				Pins.share("ws", {zeroconf: true, name: "pins-share-led"}); 				// Pins.repeat("/heartRate/read", 50, value => { 				// 	if (value != oldHr) { 				// 		currentHr = value; 				// 	} 				// }); 			}; 		}); 	} } application.behavior = new AppBehavior(); let currentHr;